[
  {
    "objectID": "rotorua.html",
    "href": "rotorua.html",
    "title": "Meterological Source Comparison",
    "section": "",
    "text": "Code\nlibrary(tidyverse)\nlibrary(lubridate)\nlibrary(gt)\nlibrary(slider)\nlibrary(plotly)\nlibrary(glue)\nlibrary(reactable)\nlibrary(htmltools)\n\n\n# Always resolve paths from project root\nlibrary(here)\n\n# ---- source scripts ----\nsource(here::here(\"scripts\", \"00_metrics_helpers.R\"))\nsource(here::here(\"scripts\", \"02_analysis_helpers.R\"))\n\n# Fallback params for interactive runs\nif (!exists(\"params\")) {\n  params &lt;- list(\n    lake_id = \"rotorua\",\n    reference = \"Airport_1770\",\n    targets = c(\"ERA5\", \"Buoy\", \"Town_40177\", \"VCS_On\"),\n    vars = c(\"Temp_C\", \"Precip_mm\", \"Wind_Spd_ms\", \"RadSWD_Wm2\"),\n    wet_threshold_mm = 1,\n    windy_top_pct = 0.10,\n    windy_threshold_ms = 10,\n    window_days = 30\n  )\n}"
  },
  {
    "objectID": "rotorua.html#load-necessary-libraries",
    "href": "rotorua.html#load-necessary-libraries",
    "title": "Meterological Source Comparison",
    "section": "",
    "text": "Code\nlibrary(tidyverse)\nlibrary(lubridate)\nlibrary(gt)\nlibrary(slider)\nlibrary(plotly)\nlibrary(glue)\nlibrary(reactable)\nlibrary(htmltools)\n\n\n# Always resolve paths from project root\nlibrary(here)\n\n# ---- source scripts ----\nsource(here::here(\"scripts\", \"00_metrics_helpers.R\"))\nsource(here::here(\"scripts\", \"02_analysis_helpers.R\"))\n\n# Fallback params for interactive runs\nif (!exists(\"params\")) {\n  params &lt;- list(\n    lake_id = \"rotorua\",\n    reference = \"Airport_1770\",\n    targets = c(\"ERA5\", \"Buoy\", \"Town_40177\", \"VCS_On\"),\n    vars = c(\"Temp_C\", \"Precip_mm\", \"Wind_Spd_ms\", \"RadSWD_Wm2\"),\n    wet_threshold_mm = 1,\n    windy_top_pct = 0.10,\n    windy_threshold_ms = 10,\n    window_days = 30\n  )\n}"
  },
  {
    "objectID": "rotorua.html#defaults-static-view",
    "href": "rotorua.html#defaults-static-view",
    "title": "Meterological Source Comparison",
    "section": "Defaults (static view)",
    "text": "Defaults (static view)\n\n\nCode\nselected_target_name &lt;- params$targets[[1]]\nselected_var &lt;- vars[[1]]\n\nplot_data &lt;- bind_rows(\n  Reference = ref_df |&gt; select(Date, all_of(selected_var)),\n  Target    = targets_list[[selected_target_name]] |&gt; select(Date, all_of(selected_var)),\n  .id = \"Series\"\n)"
  },
  {
    "objectID": "rotorua.html#latest-snapshot-cards",
    "href": "rotorua.html#latest-snapshot-cards",
    "title": "Meterological Source Comparison",
    "section": "Latest snapshot cards",
    "text": "Latest snapshot cards\n\n\nCode\nlatest_ref &lt;- ref_df |&gt; filter(!is.na(Date)) |&gt; slice_max(Date, n = 1, with_ties = FALSE)\n\ncard_badge &lt;- function(label, value, suffix = \"\", status = c(\"secondary\", \"success\", \"warning\", \"danger\")) {\n  status &lt;- match.arg(status)\n  htmltools::div(\n    class = \"card text-bg-dark mb-3\",\n    style = \"min-width: 14rem;\",\n    htmltools::div(\n      class = \"card-header d-flex justify-content-between align-items-center\",\n      label,\n      htmltools::span(class = glue(\"badge text-bg-{status}\"), glue(\"{round(value, 2)}{suffix}\"))\n    )\n  )\n}\n\nprecip_status &lt;- if (latest_ref$Precip_mm &gt;= params$wet_threshold_mm) \"primary\" else \"secondary\"\nwind_status &lt;- if (latest_ref$Wind_Spd_ms &gt;= params$windy_threshold_ms) \"warning\" else \"secondary\"\n\ndiv(\n  class = \"d-flex flex-wrap gap-3\",\n  card_badge(\"Temp (C)\", latest_ref$Temp_C, status = \"secondary\"),\n  card_badge(\"Precip (mm)\", latest_ref$Precip_mm, status = precip_status),\n  card_badge(\"Wind (m/s)\", latest_ref$Wind_Spd_ms, status = wind_status),\n  card_badge(\"SW Rad (W/m2)\", latest_ref$RadSWD_Wm2, status = \"secondary\")\n)\n\n\n\n\n\nTemp (C)\n11.59\n\n\n\n\nPrecip (mm)\n0.2\n\n\n\n\nWind (m/s)\n2.54\n\n\n\n\nSW Rad (W/m2)\nNA"
  },
  {
    "objectID": "rotorua.html#interactive-plot",
    "href": "rotorua.html#interactive-plot",
    "title": "Meterological Source Comparison",
    "section": "Interactive plot",
    "text": "Interactive plot\n\n\nCode\np &lt;- plot_data |&gt;\n  ggplot(aes(Date, .data[[selected_var]], color = Series)) +\n  geom_line() +\n  labs(\n    x = NULL,\n    y = selected_var,\n    title = glue(\"Reference vs {selected_target_name}\")\n  ) +\n  theme_minimal()\n\nggplotly(p, tooltip = c(\"Date\", \"y\", \"Series\"))"
  },
  {
    "objectID": "rotorua.html#interactive-table",
    "href": "rotorua.html#interactive-table",
    "title": "Meterological Source Comparison",
    "section": "Interactive table",
    "text": "Interactive table\n\n\nCode\nlatest_table &lt;- map_dfr(\n  setNames(c(params$reference, params$targets), c(\"Reference\", params$targets)),\n  function(name) {\n    df &lt;- read_from_map(name) |&gt; filter(!is.na(Date))\n    last_row &lt;- slice_max(df, Date, n = 1, with_ties = FALSE)\n    tibble(\n      Dataset    = name,\n      Date       = last_row$Date,\n      Temp_C     = last_row$Temp_C,\n      Precip_mm  = last_row$Precip_mm,\n      Wind_Spd_ms= last_row$Wind_Spd_ms,\n      RadSWD_Wm2 = last_row$RadSWD_Wm2\n    )\n  }\n)\n\nreactable(\n  latest_table,\n  searchable = TRUE,\n  sortable = TRUE,\n  pagination = TRUE,\n  striped = TRUE,\n  highlight = TRUE,\n  defaultPageSize = 5\n)"
  },
  {
    "objectID": "methods.html#metrics-wetwindy-supsets",
    "href": "methods.html#metrics-wetwindy-supsets",
    "title": "Methods",
    "section": "Metrics + wet/windy supsets",
    "text": "Metrics + wet/windy supsets"
  },
  {
    "objectID": "methods.html#data-avalability-overlap",
    "href": "methods.html#data-avalability-overlap",
    "title": "Methods",
    "section": "Data avalability / overlap",
    "text": "Data avalability / overlap\n= table here showing data time series and its overlap (coverage per dataset)"
  },
  {
    "objectID": "Behaviour.html",
    "href": "Behaviour.html",
    "title": "MET Lake Comparison",
    "section": "",
    "text": "title: “Meterological Source Comparison” Subtitle: “Seasonal and event behaviour” format: html —"
  },
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "Meterological Lake Comparison",
    "section": "",
    "text": "This project aims to take meterological data from close proximity and evaluate their validity across variables and time."
  },
  {
    "objectID": "index.html#project-description",
    "href": "index.html#project-description",
    "title": "Meterological Lake Comparison",
    "section": "",
    "text": "This project aims to take meterological data from close proximity and evaluate their validity across variables and time."
  },
  {
    "objectID": "index.html#data-coverage",
    "href": "index.html#data-coverage",
    "title": "Meterological Lake Comparison",
    "section": "Data coverage",
    "text": "Data coverage"
  },
  {
    "objectID": "index.html#metrics-table-reference-vs-targets",
    "href": "index.html#metrics-table-reference-vs-targets",
    "title": "Meterological Lake Comparison",
    "section": "Metrics table (reference vs targets)",
    "text": "Metrics table (reference vs targets)"
  },
  {
    "objectID": "index.html#time-series-overlays",
    "href": "index.html#time-series-overlays",
    "title": "Meterological Lake Comparison",
    "section": "Time series overlays",
    "text": "Time series overlays\n\n\n[[1]]\n\n[[2]]\n\n[[3]]\n\n[[4]]"
  },
  {
    "objectID": "Overview.html",
    "href": "Overview.html",
    "title": "Meterological Source Comparison",
    "section": "",
    "text": "To analyse different meterological data avalable for a given location."
  },
  {
    "objectID": "Overview.html#objective",
    "href": "Overview.html#objective",
    "title": "Meterological Source Comparison",
    "section": "",
    "text": "To analyse different meterological data avalable for a given location."
  },
  {
    "objectID": "Overview.html#data-sources",
    "href": "Overview.html#data-sources",
    "title": "Meterological Source Comparison",
    "section": "Data sources",
    "text": "Data sources\nLimnotrack Buoy (lat: Long:) on lake, NIWA virtual climate station network (VCSN) grid NO:, ERA5 statlite data for Lat: and Long, Observational data Airport data (lat” long:), Obresvational data (lat: long:)\nData source and station names will vary from location to location. Selecting stations from these websites is laid out in the data wrangling section"
  },
  {
    "objectID": "Overview.html#study-area",
    "href": "Overview.html#study-area",
    "title": "Meterological Source Comparison",
    "section": "Study area",
    "text": "Study area\n\n\nCode\nlibrary(leaflet)\n\n# Interactive overview map centred on the lake\nleaflet() |&gt;\n  addTiles() |&gt;\n  addCircles(\n    lng = params$lon,\n    lat = params$lat,\n    radius = params$buffer_km * 1000,\n    color = \"dodgerblue\",\n    fillOpacity = 0.25,\n    popup = params$lake_name\n  ) |&gt;\n  addCircleMarkers(\n    lng = params$lon,\n    lat = params$lat,\n    radius = 6,\n    color = \"navy\",\n    fillOpacity = 0.9,\n    popup = params$lake_name\n  ) |&gt;\n  setView(lng = params$lon, lat = params$lat, zoom = 11)"
  },
  {
    "objectID": "Overview.html#polygon-and-plot",
    "href": "Overview.html#polygon-and-plot",
    "title": "Meterological Source Comparison",
    "section": "Polygon and plot",
    "text": "Polygon and plot\n\n\nCode\nlibrary(osmdata)\nlibrary(sf)\nlibrary(tmap)\n\n# Download nearby water polygons and plot as a static reference map\nbb &lt;- c(\n  params$lon - 0.1,\n  params$lat - 0.1,\n  params$lon + 0.1,\n  params$lat + 0.1\n)\n\nosm_lake &lt;- opq(bbox = bb) |&gt;\n  add_osm_feature(key = \"natural\", value = \"water\") |&gt;\n  osmdata_sf()\n\nlake_poly &lt;- osm_lake$osm_multipolygons |&gt;\n  st_make_valid()\n\ntmap_mode(\"plot\")\n\ntm_shape(lake_poly) +\n  tm_fill(col = \"steelblue\", alpha = 0.6) +\n  tm_borders(col = \"black\") +\n  tm_layout(\n    title = params$lake_name,\n    frame = FALSE\n  )\n\n\n\n\n\n\n\n\n\nRotorua Lake, North Island, New Zealand"
  },
  {
    "objectID": "Results.html",
    "href": "Results.html",
    "title": "Results",
    "section": "",
    "text": "note could call this variable diagnostics? then have sub sections in here or vars (temp, precip,rad and wind)"
  },
  {
    "objectID": "Results.html#metrics-all-days",
    "href": "Results.html#metrics-all-days",
    "title": "Results",
    "section": "Metrics (all days)",
    "text": "Metrics (all days)"
  },
  {
    "objectID": "Results.html#precipitation-wet-days-table",
    "href": "Results.html#precipitation-wet-days-table",
    "title": "Results",
    "section": "Precipitation wet days table",
    "text": "Precipitation wet days table"
  },
  {
    "objectID": "Results.html#windy-days-table-top-10-threshold",
    "href": "Results.html#windy-days-table-top-10-threshold",
    "title": "Results",
    "section": "Windy days table (top 10% + threshold)",
    "text": "Windy days table (top 10% + threshold)"
  },
  {
    "objectID": "Results.html#plots",
    "href": "Results.html#plots",
    "title": "Results",
    "section": "Plots",
    "text": "Plots\n\nScatter vs reference + 1:1 line\n\n\ntime series overlays\n\n\nDistribution (density/hits)"
  }
]