[
  {
    "objectID": "rotorua.html",
    "href": "rotorua.html",
    "title": "Meterological Source Comparison",
    "section": "",
    "text": "Code\nlibrary(tidyverse)\nlibrary(lubridate)\nlibrary(gt)\nlibrary(slider)\nlibrary(plotly)\nlibrary(glue)\nlibrary(reactable)\nlibrary(htmltools)\n\n\n# Always resolve paths from project root\nlibrary(here)\n\n# ---- source scripts ----\nsource(here::here(\"scripts\", \"00_metrics_helpers.R\"))\nsource(here::here(\"scripts\", \"02_analysis_helpers.R\"))\n\n# Fallback params for interactive runs\nif (!exists(\"params\")) {\n  params &lt;- list(\n    lake_id = \"rotorua\",\n    reference = \"Airport_1770\",\n    targets = c(\"ERA5\", \"Buoy\", \"Town_40177\", \"VCS_On\"),\n    vars = c(\"Temp_C\", \"Precip_mm\", \"Wind_Spd_ms\", \"RadSWD_Wm2\"),\n    wet_threshold_mm = 1,\n    windy_top_pct = 0.10,\n    windy_threshold_ms = 10,\n    window_days = 30\n  )\n}"
  },
  {
    "objectID": "rotorua.html#load-necessary-libraries",
    "href": "rotorua.html#load-necessary-libraries",
    "title": "Meterological Source Comparison",
    "section": "",
    "text": "Code\nlibrary(tidyverse)\nlibrary(lubridate)\nlibrary(gt)\nlibrary(slider)\nlibrary(plotly)\nlibrary(glue)\nlibrary(reactable)\nlibrary(htmltools)\n\n\n# Always resolve paths from project root\nlibrary(here)\n\n# ---- source scripts ----\nsource(here::here(\"scripts\", \"00_metrics_helpers.R\"))\nsource(here::here(\"scripts\", \"02_analysis_helpers.R\"))\n\n# Fallback params for interactive runs\nif (!exists(\"params\")) {\n  params &lt;- list(\n    lake_id = \"rotorua\",\n    reference = \"Airport_1770\",\n    targets = c(\"ERA5\", \"Buoy\", \"Town_40177\", \"VCS_On\"),\n    vars = c(\"Temp_C\", \"Precip_mm\", \"Wind_Spd_ms\", \"RadSWD_Wm2\"),\n    wet_threshold_mm = 1,\n    windy_top_pct = 0.10,\n    windy_threshold_ms = 10,\n    window_days = 30\n  )\n}"
  },
  {
    "objectID": "rotorua.html#defaults-static-view",
    "href": "rotorua.html#defaults-static-view",
    "title": "Meterological Source Comparison",
    "section": "Defaults (static view)",
    "text": "Defaults (static view)\n\n\nCode\nselected_target_name &lt;- params$targets[[1]]\nselected_var &lt;- vars[[1]]\n\nplot_data &lt;- bind_rows(\n  Reference = ref_df |&gt; select(Date, all_of(selected_var)),\n  Target    = targets_list[[selected_target_name]] |&gt; select(Date, all_of(selected_var)),\n  .id = \"Series\"\n)"
  },
  {
    "objectID": "rotorua.html#latest-snapshot-cards",
    "href": "rotorua.html#latest-snapshot-cards",
    "title": "Meterological Source Comparison",
    "section": "Latest snapshot cards",
    "text": "Latest snapshot cards\n\n\nCode\nlatest_ref &lt;- ref_df |&gt; filter(!is.na(Date)) |&gt; slice_max(Date, n = 1, with_ties = FALSE)\n\ncard_badge &lt;- function(label, value, suffix = \"\", status = c(\"secondary\", \"success\", \"warning\", \"danger\")) {\n  status &lt;- match.arg(status)\n  htmltools::div(\n    class = \"card text-bg-dark mb-3\",\n    style = \"min-width: 14rem;\",\n    htmltools::div(\n      class = \"card-header d-flex justify-content-between align-items-center\",\n      label,\n      htmltools::span(class = glue(\"badge text-bg-{status}\"), glue(\"{round(value, 2)}{suffix}\"))\n    )\n  )\n}\n\nprecip_status &lt;- if (latest_ref$Precip_mm &gt;= params$wet_threshold_mm) \"primary\" else \"secondary\"\nwind_status &lt;- if (latest_ref$Wind_Spd_ms &gt;= params$windy_threshold_ms) \"warning\" else \"secondary\"\n\ndiv(\n  class = \"d-flex flex-wrap gap-3\",\n  card_badge(\"Temp (C)\", latest_ref$Temp_C, status = \"secondary\"),\n  card_badge(\"Precip (mm)\", latest_ref$Precip_mm, status = precip_status),\n  card_badge(\"Wind (m/s)\", latest_ref$Wind_Spd_ms, status = wind_status),\n  card_badge(\"SW Rad (W/m2)\", latest_ref$RadSWD_Wm2, status = \"secondary\")\n)\n\n\n\n\n\nTemp (C)\n11.59\n\n\n\n\nPrecip (mm)\n0.2\n\n\n\n\nWind (m/s)\n2.54\n\n\n\n\nSW Rad (W/m2)\nNA"
  },
  {
    "objectID": "rotorua.html#interactive-plot",
    "href": "rotorua.html#interactive-plot",
    "title": "Meterological Source Comparison",
    "section": "Interactive plot",
    "text": "Interactive plot\n\n\nCode\np &lt;- plot_data |&gt;\n  ggplot(aes(Date, .data[[selected_var]], color = Series)) +\n  geom_line() +\n  labs(\n    x = NULL,\n    y = selected_var,\n    title = glue(\"Reference vs {selected_target_name}\")\n  ) +\n  theme_minimal()\n\nggplotly(p, tooltip = c(\"Date\", \"y\", \"Series\"))"
  },
  {
    "objectID": "rotorua.html#interactive-table",
    "href": "rotorua.html#interactive-table",
    "title": "Meterological Source Comparison",
    "section": "Interactive table",
    "text": "Interactive table\n\n\nCode\nlatest_table &lt;- map_dfr(\n  setNames(c(params$reference, params$targets), c(\"Reference\", params$targets)),\n  function(name) {\n    df &lt;- read_from_map(name) |&gt; filter(!is.na(Date))\n    last_row &lt;- slice_max(df, Date, n = 1, with_ties = FALSE)\n    tibble(\n      Dataset    = name,\n      Date       = last_row$Date,\n      Temp_C     = last_row$Temp_C,\n      Precip_mm  = last_row$Precip_mm,\n      Wind_Spd_ms= last_row$Wind_Spd_ms,\n      RadSWD_Wm2 = last_row$RadSWD_Wm2\n    )\n  }\n)\n\nreactable(\n  latest_table,\n  searchable = TRUE,\n  sortable = TRUE,\n  pagination = TRUE,\n  striped = TRUE,\n  highlight = TRUE,\n  defaultPageSize = 5\n)"
  },
  {
    "objectID": "index.html#metrics-table-reference-vs-targets",
    "href": "index.html#metrics-table-reference-vs-targets",
    "title": "MET Lake Comparison",
    "section": "Metrics table (reference vs targets)",
    "text": "Metrics table (reference vs targets)"
  },
  {
    "objectID": "index.html#time-series-overlays",
    "href": "index.html#time-series-overlays",
    "title": "MET Lake Comparison",
    "section": "Time series overlays",
    "text": "Time series overlays\n\n\n[[1]]\n\n[[2]]\n\n[[3]]\n\n[[4]]"
  }
]